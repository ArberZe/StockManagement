﻿
@inject AuthenticationStateProvider AuthenticationStateProvider

@code{
    protected override async Task OnInitializedAsync()
    {
        var authenticationState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        
        if (authenticationState?.User?.Identity?.IsAuthenticated == false)
        {
            var path = NavigationManager.BaseUri.EndsWith("/") ? $"{NavigationManager.BaseUri}login"
                                                            : $"{NavigationManager.BaseUri}/login";
            
            NavigationManager.NavigateTo(path, true);
        }
    }
}